---
title: "lab1"
author: "Leticia Wanderley"
date: "19 de maio de 2017"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
# install.packages(c("dplyr", "tidyr", "ggplot2", "readr"))
library("dplyr")
library("tidyr")
library("ggplot2")
library("readr")
```

## Problema 1 - Checkpoint 1

As séries escolhida foram: Modern Family, Sherlock, House of Cards e How I Met Your Mother.
Carregando o subconjunto de séries:
```{r series}
dados = read_csv("series_from_imdb.csv")
series = dados %>% 
  filter(series_name %in% c("Modern Family", "Sherlock", "House of Cards", "How I Met Your Mother"))
```

## Respondendo às perguntas

#a. Qual das séries que você escolheu é mais bem avaliada no IMDB? A diferença é grande? Pequena? 
```{r}
series %>% 
  ggplot(aes(x = reorder(series_name, -UserRating, FUN=median), y = UserRating)) + 
  geom_boxplot(outlier.colour = NA) +
  labs(x="Nome da série", y="Mediana das notas", title="Série mais bem avaliada")
```
Usando a mediana:
```{r}
group_by(series, series_name) %>% 
  summarize(Mediana = median(UserRating)) %>%
  arrange(desc(Mediana))
```
Usando a média:
```{r}
group_by(series, series_name) %>% 
  summarize(Média = mean(UserRating)) %>%
  arrange(desc(Média))
```
Usando a nota máxima:
```{r}
group_by(series, series_name) %>% 
  summarize(Máxima = max(UserRating)) %>% 
  arrange(desc(Máxima))
```

Usando três diferentes métricas para sumarizar as notas dadas pelos usuários o resultado é sempre o mesmo. Sherlock é a melhor série, seguida por House of Cards, How I Met Your Mother e Modern Family, nesss ordem.

#b. Qual das séries que você escolheu tem episódios de qualidade mais irregular segundo o IMDB? A diferença é grande? Pequena?
```{r}
series %>%
  ggplot(aes(x=series_ep, y=UserRating)) + 
  theme_bw() +
  geom_line() +
  facet_wrap(~series_name, scales="free")
```

```{r}
sherlock = series[series$series_name=="Sherlock",]
hoc = series[series$series_name=="House of Cards",]
himym = series[series$series_name=="How I Met Your Mother",]
mf = series[series$series_name=="Modern Family",]
ggplot(sherlock, aes(series_name, UserRating, series_ep)) + theme_bw() +
  geom_line(data=sherlock, aes(x=series_ep, y=UserRating), color="blue") +Variância
  geom_line(data=mf, aes(x=series_ep, y=UserRating), color="darkorange") +
  geom_line(data=hoc, aes(x=series_ep, y=UserRating), color="black") +
  geom_line(data=himym, aes(x=series_ep, y=UserRating), color="red")
```
```{r}
group_by(series, Série=series_name) %>% 
  summarize(Variância = var(UserRating)) %>%
  arrange(Variância)
```